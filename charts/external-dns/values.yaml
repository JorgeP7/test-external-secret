# values.yaml (para testing local con provider fake)

image:
  repository: registry.k8s.io/external-dns/external-dns
  tag: v0.19.0   # Mantén v0.18.0 por ahora; cambia a v0.19.0 después

provider:
  name: fake     # ← Esto es clave y obligatorio en chart >=1.14/1.18

extraArgs:
  provider: fake
  annotation-filter: 'ingress.indeed.com/external-dns notin (false),nginx.ingress.kubernetes.io/canary notin (true)'
  log-level: debug
  dry-run: ""          # Deja vacío para false; o pon "true" para modo simulación
  txt-owner-id: local-test-cluster
  txt-prefix: 'owner-%{record_type}.'
  domain-filter: example.local   # ← Corrige esto (string o lista)
  # O usa domainFilters si el chart lo soporta como top-level (mejor):
  # domainFilters:
  #   - example.local
  aws-api-retries: '3'
  aws-batch-change-size: '100'
  aws-zone-type: ''
  aws-zones-cache-duration: '24h'
  metrics-address: ':7979'
  managed-record-types:
    - A
    - CNAME

sources:
  - service
  - ingress

policy: sync
interval: 30s
triggerLoopOnEvent: true

logLevel: debug      # Top-level para el chart (opcional si usas extraArgs)
dryRun: false

metrics:
  enabled: true

# Asegúrate de NO tener nada de AWS aquí (quita si existe):
# aws: {}